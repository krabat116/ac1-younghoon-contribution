{
  "openapi": "3.0.0",
  "info": {
    "version": "1.0.1",
    "title": "Photo Sharing App"
  },
  "components": {
    "schemas": {
      "ImageCreate": {
        "type": "object",
        "properties": {
          "ownerId": {
            "type": "string",
            "example": "user1"
          },
          "albumId": {
            "type": "string",
            "example": "album1"
          },
          "description": {
            "type": "string",
            "example": "A photo of a cow. Moo!"
          },
          "order": {
            "type": "integer",
            "minimum": 0,
            "exclusiveMinimum": true,
            "example": 1
          },
          "widthPx": {
            "type": "integer",
            "minimum": 0,
            "exclusiveMinimum": true,
            "example": 1080
          },
          "heightPx": {
            "type": "integer",
            "minimum": 0,
            "exclusiveMinimum": true,
            "example": 1920
          },
          "image": {
            "type": "string",
            "format": "binary"
          }
        },
        "required": [
          "ownerId",
          "albumId",
          "order",
          "widthPx",
          "heightPx"
        ]
      },
      "ImageUpdate": {
        "type": "object",
        "properties": {
          "description": {
            "type": "string",
            "nullable": true,
            "example": "A photo of a cow. Moo!"
          },
          "order": {
            "type": "integer",
            "minimum": 0,
            "exclusiveMinimum": true,
            "example": 1
          }
        }
      },
      "CommentCreate": {
        "type": "object",
        "properties": {
          "ownerId": {
            "type": "string",
            "minLength": 1,
            "example": "user1"
          },
          "albumId": {
            "type": "string",
            "minLength": 1,
            "example": "album1"
          },
          "content": {
            "type": "string",
            "minLength": 1,
            "example": "Wow! such a beautiful pic!"
          }
        },
        "required": [
          "ownerId",
          "albumId",
          "content"
        ]
      },
      "CommentDelete": {
        "type": "object",
        "properties": {
          "ownerId": {
            "type": "string",
            "minLength": 1,
            "example": "user1"
          }
        },
        "required": [
          "ownerId"
        ]
      }
    },
    "parameters": {}
  },
  "paths": {
    "/image": {
      "post": {
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/ImageCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "upload a new image object.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "type",
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "failed to save new image.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "type",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/image/{id}": {
      "get": {
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "description": "Id of image you wish to fetch."
            },
            "required": true,
            "in": "path",
            "name": "id"
          }
        ],
        "responses": {
          "200": {
            "description": "Fetch an image object.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "presignedUrl": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "presignedUrl"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Image could not be found in bucket.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "type",
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "patch": {
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "description": "Id of image you wish to fetch."
            },
            "required": true,
            "in": "path",
            "name": "id"
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/ImageUpdate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "update an image object.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "type",
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "failed to update image.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "type",
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "description": "Id of image you wish to delete."
            },
            "required": true,
            "in": "path",
            "name": "id"
          }
        ],
        "responses": {
          "201": {
            "description": "delete an existing image by id.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "type",
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "failed to delete the image.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "type",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/comment": {
      "post": {
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CommentCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "add a new comment to an album.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "type",
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "failed to add new comment.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "type",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/comment/{albumId}": {
      "get": {
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "example": "album1"
            },
            "required": true,
            "in": "path",
            "name": "albumId"
          }
        ],
        "responses": {
          "201": {
            "description": "add a new comment to an album.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string"
                    },
                    "comments": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "content": {
                            "type": "string"
                          },
                          "albumid": {
                            "type": "string"
                          },
                          "dateAdded": {
                            "type": "string"
                          },
                          "dateCreated": {
                            "type": "string"
                          },
                          "id": {
                            "type": "string"
                          },
                          "owner": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "content",
                          "albumid",
                          "dateAdded",
                          "dateCreated",
                          "id",
                          "owner"
                        ]
                      }
                    }
                  },
                  "required": [
                    "type",
                    "comments"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/comment/{commentId}": {
      "delete": {
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "example": "comment1"
            },
            "required": true,
            "in": "path",
            "name": "commentId"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CommentDelete"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Delete a comment from a post.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "type",
                    "message"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Failed to delete a comment from a post.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "type",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    }
  }
}